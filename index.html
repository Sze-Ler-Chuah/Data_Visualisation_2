<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>

  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.cdnfonts.com/css/bhlingglers" rel="stylesheet">
  <link href="https://fonts.cdnfonts.com/css/marhey" rel="stylesheet">
  <link href="https://fonts.cdnfonts.com/css/adlam-display" rel="stylesheet">
                
  <title>Data Visualisation 2</title>
</head>
<body onload="showTurnout()">
    <div id="dashboard">
        <div id="title">
            <h1> The Changing Tide : Malaysia's GE15 </h1>
            <hr>
        </div>
        <div id="background">
            <h2> Background </h2>
            <p> 
                Following Barisan Nasional’s historic defeat in the <span class = 'ge14-text'>14th General Election  <br>
                (GE14)</span>, many Malaysians anticipated significant changes in the political <br>
                landscape. However, the <b>Sheraton Move</b> led to the dissolution of the Pakatan <br>
                Harapan (PH) government. In the <span class='ge15-text'>15th General Election (GE15)</span>, a coalition <br>
                government was formed due to <b>hung parliament</b> <i>(No party secure a minimum <br>
                majority of 112 seats)</i>, reshaping the nation’s political dynamics once again.<br>
                Below, we will study deeply to understand the reason behind hung parliament.
            </p>
        </div>
        <div id="buttons">
            <button onclick="showElection()">Election Result</button>
            <button onclick="showTurnout()">Turnout Rate</button>
            <button onclick="showRace()">Race Distribution</button>
        </div>
        <div id="switchButton">
            <span id="switchButtonLabel">Press to Switch Election:</span>
            <button id="toggleButton" onclick="toggleElection()">GE14</button>

        </div>
        <div id="visualisation">
            <div id="tooltip"></div>
            <div id="vis"></div>
            <div id="vis-text">
                <div id="vis-text-left"></div>
                <div id="vis-text-right"></div>
            </div>
            <h2 id="absent_title"> Impact of Absent Votes to the Result of GE15 </h2>
            <div id="absent_chart">
                <div id="absent"></div>
                <div id="absent_text">
                    <p>
                        In <span class ='ge15-text'>GE15</span>, the number of absent votes had a significant impact on the  
                        election results. If Pakatan Harapan (PH) had secured more votes, it 
                        might have reach the <span class='majority-text'>simple majority of 112 seats</span> and won the  
                        election. 
                    </p>
                    <p>
                        This analysis was particularly important because PH was the <b>only 
                        party</b> with a realistic chance of forming the government on its own 
                        with <b>81 seats won</b> and having a potential to win <b>61 more seats</b> if 
                        the voters' turnout rate was higher.
                    </p>
                    <p>
                        The coalition government should be aware of this issues and take 
                        necessary actions to improve the voter turnout rate in the future 
                        elections.
                    </p>
                </div>

            </div>
            <h2 id="radar_title">The Multi-Way Contest of GE14 & GE15</h2>
            <div id = "radar_chart">
                <div id="radar"></div>
                <div id="radar_text">
                    <p>
                        In <span class="ge14-text">GE14</span>, the election landscape was dominated by three main parties: 
                        BN, PH, and PAS. This resulted in <b>151 three-way contests</b>, 
                        accounting for <b>68%</b> of all seats. The clear division of the vote between 
                        these major parties led to a decisive outcome, with no hung parliament 
                        but a direct winner.
                    </p>
                        
                    <p>
                        However, <span class="ge15-text">GE15</span> saw a significant shift. The political landscape became  
                        more fragmented, with numerous new parties emerging and contesting 
                        in the election. This led to a wide range of contests, from <b>2-way</b> to 
                        as many as <b>10-way</b> battles.
                    </p>
                        
                    <p>
                        Consequently, the vote was split among several parties, unlike GE14, 
                        where the focus remained on a few dominant contenders.
                    </p>
                </div>
            </div>
                
            <h2 id="undi18_title">Analysis on the Impact of UNDI-18</h2>
            <div id="mosaic_chart">
                <div id="mosaic"></div>
                <div id="mosaic_text"> 
                    <p>
                        <span class="ge15-text">GE15</span> introduced two significant changes: <b>UNDI-18</b> and <b>Automatic  
                        Voter Registration (AVR)</b>.
                    </p> 
                        
                    <p>
                        <b>UNDI-18</b> lowered the voting age from <b>21</b> to <b>18</b>, aiming to attract 
                        more young voters. This reform was highly successful, with 
                        approximately <b>1.4 million votes</b> casted by voters aged 18-20, 
                        accounting <b>6.6%</b> of the total votes. 
                    </p>
                        
                    <p>
                        <b>AVR</b> which automatically registered citizens as voters, further 
                        simplified the voting process. As a result, the voter pool increased 
                        significantly from GE14's <b>12.3 million</b> to GE15's <b>15.81 million</b>.
                    </p>
                        
                    <p>
                        Despite the increase in registered voters, the turnout rate for GE15 
                        was <b>74.7%</b>,a <b>7.6% drop</b> from GE14's <b>82.3%</b>. This decline in voter 
                        participation is a critical issue and the government needs to address 
                        it by implementing strategies to improve future turnout rates.
                     </p>
                </div>
            </div>
            <div id="two_chart_container">
                <div id="two_chart">
                    <div id="pop_pyramid"></div> 
                    <div id = 'treemap'></div>                     
                </div>
                <div id="two_chart_text">
                    <p id = "pop_pyramid_text"> 
                        By closely comparing the number of votes between <span class="ge14-text">GE14</span> and <span class = "ge15-text">GE15</span>,  
                        it is observed that GE15 recorded a significantly <b>higher</b> number of 
                        votes across all age groups. This increase can be attributed to the 
                        introduction of <b>AVR</b> and <b>UNDI-18</b>.These reforms have made the 
                        voting process easier and more accessible to the public, leading to a 
                        <b>substantial rise</b> in the number of eligible voters in <span class = 'ge15-text'>GE15</span>.
                    </p>
                    <p id="treemap_text">
                        From the treemap above, it is observed that the distribution of electors 
                        across different genders within each group is <b>approximately the same</b>. 
                    </p>     
                </div>
               <div id="metadata">
                    <div id="self_info">
                        <p>
                            <b>Author</b>: Chuah Sze Ler <br>
                            <b>Date</b>: 13/10/2024 <br>
                            <b>Implementation</b>: This visualisation explores the election <br>results 
                            of GE15 and analyse on the reason for hung parliament.
                        </p>
                    </div>
                    <div id="data_info">
                        <p>
                            <b>Data Source</b>:
                        </p>
                        <ul>
                            <li>
                                <b>Link</b>: <a href="https://github.com/TindakMalaysia/HISTORICAL-ELECTION-RESULTS/blob/main/2022-ELECTION-RESULTS/MALAYSIA_GE15_PARLIAMENT_ELECTIONS_v22112023.csv">GE15 Election Result</a> <br>
                                <b>Author</b>: Danesh Prakash Chacko <br>
                                <b>Date</b>: 12/2/2024 
                            </li>
                            <li>
                                <b>Link</b>: <a href="https://github.com/TindakMalaysia/HISTORICAL-ELECTION-RESULTS/blob/main/2022-ELECTION-RESULTS/MALAYSIA_2022_PARLIAMENT_COMPOSITION.csv">GE15 Parliament Composition</a> <br>
                                <b>Author</b>: Danesh Prakash Chacko <br>
                                <b>Date</b>: 18/1/2024 
                            </li>
                            <li>
                                <b>Link</b>: <a href="https://github.com/TindakMalaysia/HISTORICAL-ELECTION-RESULTS/tree/main/2018-ELECTION-RESULTS">GE14 Election Result</a> <br>
                                <b>Author</b>: Danesh Prakash Chacko <br>
                                <b>Date</b>: 24/9/2024 
                            </li>
                            <li>
                                <b>Link</b>: <a href="https://github.com/TindakMalaysia/HISTORICAL-ELECTION-RESULTS/blob/main/2018-ELECTION-RESULTS/MALAYSIA_2018_PARLIAMENTARY_COMPOSITION.csv">GE14 Parliament Composition</a> <br>
                                <b>Author</b>: Danesh Prakash Chacko <br>
                                <b>Date</b>: 24/9/2024 
                            </li>
                            <li>
                                <b>Link</b>: <a href="https://github.com/mptwaktusolat/jakim.geojson/blob/master/malaysia.state.geojson">Malaysia State GeoJSON</a> <br>
                                <b>Author</b>: Nullifye<br>
                                <b>Date</b>: 18/1/2024 
                            </li>                            
                            <li>
                                <b>Link</b>: <a href="https://github.com/mptwaktusolat/jakim.geojson/blob/master/malaysia.parlimen.geojson">Malaysia Parliament GeoJSON</a> <br>
                                <b>Author</b>: Nullifye <br>
                                <b>Date</b>: 21/10/2022 
                            </li>
                        </ul>

                    </div>
               </div>
            </div>
        </div>
        <script>
            let currentElection = 'GE15';
            let currentVisualization = 'election';

            function showElection() {
                currentVisualization = 'election';
                const vis = document.getElementById('vis');

                const ge15Url = "json/election_result_GE15.json";
                const ge14Url = "json/election_result_GE14.json";
                const ge15DataUrl = 'data/GE15_Winning_Party.csv';
                const ge14DataUrl = 'data/GE14_Winning_Party.csv';

                const visUrl = currentElection === 'GE15' ? ge15Url : ge14Url;
                const visDataUrl = currentElection === 'GE15' ? ge15DataUrl : ge14DataUrl;
    
                function handleClickGE14(result, dataUrl) 
                {
                    const tooltip = document.getElementById('tooltip');

                    result.view.addEventListener('click', (event, item) => 
                    {
                        if (item && item.datum && item.datum.properties && item.datum.properties.name) 
                        {
                            const stateName = item.datum.properties.name;

                            fetch(dataUrl).then(response => response.text()).then(csvText => {
                                const rows = csvText.split('\n').map(row => row.trim().split(','));
                                const headers = rows[0];
                                const stateIndex = headers.indexOf('STATE');
                                const stateData = rows.find(row => row[stateIndex] === stateName);

                            if (stateData) 
                            {
                                const partyData = headers.slice(2).map((party, index) => ({
                                    party, seats: stateData[index + 2]
                                }));

                                const waffleData = [];
                                partyData.forEach(d => {
                                for (let i = 0; i < d.seats; i++) {
                                    waffleData.push({ party: d.party, seats : d.seats });
                                }
                            });

                            // Calculate grid positions
                            const totalSeats = waffleData.length;
                            const gridSize = Math.ceil(Math.sqrt(totalSeats));

                            waffleData.forEach((d, i) => {
                                d.row = Math.floor(i / gridSize);
                                d.col = i % gridSize;
                            });

                            const waffleSpec = {
                                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                                "width": 200,
                                "height": 200,
                                "title" : {
                                    "text": `${stateName} Seats Distribution (Total Seats: ${totalSeats})`,
                                    "fontSize": 14
                                },
                                "data": {
                                    "values": waffleData
                                },
                                "mark": {
                                    "type": "rect",
                                    "stroke": "black",
                                    "strokeWidth": 2
                                },
                                "encoding": {
                                    "x": { "field": "col", "type": "ordinal", "axis": null, "band": 0.1 },
                                    "y": { "field": "row", "type": "ordinal", "axis": null, "band": 0.1 },
                                    "color": {
                                        "field": "party",
                                        "type": "nominal",
                                        "scale": {
                                            "domain": ["Barisan Nasional (BN)", "Pakatan Harapan (PH)", "PAS", "Warisan", "Sabah Star", "Independent"],
                                            "range": ["#0169ba", "#f6441e", "#9944b9", "#db7dc5", "#59b2da", "#645665"]
                                        },
                                        "legend": null
                                    },
                                    "tooltip": [
                                        { "field": "party", "type": "nominal", "title": "Party" },
                                        { "field": "seats", "type": "quantitative", "title": "Seats Won" }
                                    ]
                                },
                                "config": {}
                            };
                            vegaEmbed('#tooltip', waffleSpec, { actions: false });
                            tooltip.style.display = 'block';
                            tooltip.style.left = `${event.clientX + 10}px`;
                            tooltip.style.top = `${event.clientY + 300}px`;
                            }
                        });
                    }
                });

                    // Hide tooltip when clicking outside
                    document.addEventListener('click', (e) => 
                    {
                        tooltip.style.display = 'none';
                    });
                }

                function handleClickGE15(result, dataUrl) 
                {
                    const tooltip = document.getElementById('tooltip');

                    result.view.addEventListener('click', (event, item) => 
                    {
                        if (item && item.datum && item.datum.properties && item.datum.properties.name) 
                        {
                            const stateName = item.datum.properties.name;

                            fetch(dataUrl).then(response => response.text()).then(csvText => {
                                const rows = csvText.split('\n').map(row => row.trim().split(','));
                                const headers = rows[0];
                                const stateIndex = headers.indexOf('STATE');
                                const stateData = rows.find(row => row[stateIndex] === stateName);

                            if (stateData) 
                            {
                                const partyData = headers.slice(2).map((party, index) => ({
                                    party, seats: stateData[index + 2]
                                }));

                                const waffleData = [];
                                partyData.forEach(d => {
                                for (let i = 0; i < d.seats; i++) {
                                    waffleData.push({ party: d.party, seats : d.seats });
                                }
                            });

                            // Calculate grid positions
                            const totalSeats = waffleData.length;
                            const gridSize = Math.ceil(Math.sqrt(totalSeats));

                            waffleData.forEach((d, i) => {
                                d.row = Math.floor(i / gridSize);
                                d.col = i % gridSize;
                            });

                            const waffleSpec = {
                                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                                "width": 200,
                                "height": 200,
                                "title" : {
                                    "text": `${stateName} Seats Distribution (Total Seats: ${totalSeats})`,
                                    "fontSize": 14
                                },
                                "data": {
                                    "values": waffleData
                                },
                                "mark": {
                                    "type": "rect",
                                    "stroke": "black",
                                    "strokeWidth": 2
                                },
                                "encoding": {
                                    "x": { "field": "col", "type": "ordinal", "axis": null, "band": 0.1 },
                                    "y": { "field": "row", "type": "ordinal", "axis": null, "band": 0.1 },
                                    "color": {
                                        "field": "party",
                                        "type": "nominal",
                                        "scale": {
                                            "domain": ["Barisan Nasional (BN)", "Pakatan Harapan (PH)", "Perikatan Nasional (PN)", "Gabungan Parti Sarawak (GPS)", "Gabungan Rakyat Sabah (GRS)", "Parti Bangsa Malaysia (PBM)","Parti Kesejahteraan Demokratik Masyarakat (KDM)", "Warisan", "Muda", "Independent"],
                                            "range": ["#0169ba", "#f6441e","#9944b9","#e6a700","#54b3e3","#B17457","#f39c60","#ea7dcd","#950300","#645665"]
                                        },
                                        "legend": null
                                    },
                                    "tooltip": [
                                        { "field": "party", "type": "nominal", "title": "Party" },
                                        { "field": "seats", "type": "quantitative", "title": "Seats Won" },
                                    ]
                                },
                                "config": {}
                            };
                            vegaEmbed('#tooltip', waffleSpec, { actions: false });
                            tooltip.style.display = 'block';
                            tooltip.style.left = `${event.clientX + 10}px`;
                            tooltip.style.top = `${event.clientY + 300}px`;
                            }
                        });
                    }
                });

                    // Hide tooltip when clicking outside
                    document.addEventListener('click', (e) => 
                    {
                        tooltip.style.display = 'none';
                    });
                }

                if (currentElection === 'GE15') 
                {
                    vegaEmbed('#vis', ge15Url,{"actions":false}).then(result => {
                        handleClickGE15(result, ge15DataUrl);
                    }).catch(console.error);
                } 
                else 
                {
                    vegaEmbed('#vis', ge14Url,{"actions":false}).then(result => {
                        handleClickGE14(result, ge14DataUrl);
                    }).catch(console.error);
                }
                const visTextLeft = document.getElementById('vis-text-left');
                visTextLeft.innerHTML = `<p>
                    The <span class='ge14-text'>14th General Election (GE14)</span> was undoubtedly a resounding victory <br>
                    for PH. Unlike GE15, <span class ='ph-text'>PH</span> secured the majority of seats in Parliament <br>
                    with a total of <b>113</b>. GE14 also highlighted key states such as <b>Selangor, <br>
                    Penang, Kuala Lumpur, Perak</b> and <b>Johor</b>. 
                </p>
                <p>
                    These states were crucial for political parties due to their significant <br>
                    contribution to <b>Malaysia’s economy, higher urbanisation</b> and more <br>
                    <b>affluent voter base</b>. Fortunately, <span class ='ph-text'>PH</span> managed to secure these states, <br>
                    positioning itself with the prospect of improving the country’s economy.
                </p>`;
                const visTextRight = document.getElementById('vis-text-right');
                visTextRight.innerHTML =`<p>
                    The <span class='ge15-text'>15th General Election (GE15)</span> resulted in a <b>hung parliament</b>. <br>
                    This had led to  the formation of a <b>coalition government</b>. Unlike <br> 
                    GE14, GE15 marked a significant shift in the political landscape, <br>
                    with the introduction of new parties and the reformation of existing <br>
                    ones.
                    </p>

                    <p>
                    Fortunately, the <b>coalition government</b> managed to secure the key states <br>
                    highlighted in GE14. In contrast, <span class ='pn-text'>Perikatan Nasional (PN)</span> only managed <br>
                    to secure states that were more rural and less economically vibrant, <br>
                    despite winning the second-highest number of seats.
                    </p>`;
                
            }
            function showTurnout() 
            {
                currentVisualization = 'turnout';
                const vis = document.getElementById('vis');

                const ge15Url = `json/turnout_rate_GE15.json`;
                const ge14Url = `json/turnout_rate_GE14.json`;

                const visUrl = currentElection === 'GE15' ? ge15Url : ge14Url;

                vegaEmbed('#vis', visUrl,{"actions":false}).then(function(result) {}).catch(console.error);
                const visTextLeft = document.getElementById('vis-text-left');
                visTextLeft.innerHTML = `<p>
                    The turnout rate from GE14 to GE15 showed a <b>decreasing</b> trend, largely <br> 
                    due to the introduction of <b>Automatic Voter Registration (AVR)</b> and <br> 
                    <b>UNDI-18.</b>
                    </p>`;
                const visTextRight = document.getElementById('vis-text-right');
                visTextRight.innerHTML = `<p>
                    As a result, a segment of individuals who were not politically engaged <br> 
                    opted not to vote, leading to a <b>lower overall turnout</b> in GE15. This had <br>
                    caused many constituencies in GE15 to be won by small margins, <br>
                    contributing to the formation of a <b>hung parliament</b>.
                    </p>`;
            }

            function showRace() {
                currentVisualization = 'race';
                const vis = document.getElementById('vis');

                const ge15Url = `json/race_distribution_GE15.json`;
                const ge14Url = `json/race_distribution_GE14.json`;

                const visUrl = currentElection === 'GE15' ? ge15Url : ge14Url;

                // Function to handle click event for GE14 visualization
                function handleClickRaceGE14(result) 
                {
                    const tooltip = document.getElementById('tooltip');
                    
                    result.view.addEventListener('mouseover', (event, item) => 
                    {
                        if (item && item.datum && item.datum.PARLIAMENTARY_NAME)
                        {   
                            const data = item.datum;

                            const raceData = [
                                { race: 'Malay', percentage: data.Malay },
                                { race: 'Chinese', percentage: data.Chinese },
                                { race: 'Indian', percentage: data.Indian },
                                { race: 'Orang Asli', percentage: data['Orang Asli'] },
                                { race: 'Bumiputera Sabah', percentage: data['Bumiputera Sabah'] },
                                { race: 'Bumiputera Sarawak', percentage: data['Bumiputera Sarawak'] },
                                { race: 'Others', percentage: data.Others }
                            ];

                            const pieSpec = {
                                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                                "title": `${data.PARLIAMENTARY_NAME} Race Distribution`,
                                "width": 200,
                                "height": 200,
                                "data": { "values": raceData },
                                "transform": [
                                    {
                                        "calculate": "datum.percentage / 100",
                                        "as": "percentageDivided"
                                    }
                                ],
                                "mark": "arc",
                                "encoding": {
                                "theta": { "field": "percentage", "type": "quantitative" },
                                "color": {
                                    "field": "race",
                                    "type": "nominal",
                                    "scale": {
                                    "domain": ["Malay", "Chinese", "Indian", "Orang Asli", "Bumiputera Sabah", "Bumiputera Sarawak", "Others"],
                                    "range": ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2"]
                                    },
                                    "legend": 
                                    {
                                        "title":"Race"
                                    }
                                },
                                "tooltip": [
                                    { "field": "race", "type": "nominal", "title": "Race" },
                                    { "field": "percentageDivided", "type": "quantitative", "format" : ".2%", "title": "Percentage" }
                                ]
                                },
                                "config": {}
                            };

                            vegaEmbed('#tooltip', pieSpec, { actions: false })
                            tooltip.style.display = 'block';
                            tooltip.style.left = `${event.clientX + 10}px`;
                            tooltip.style.top = `${event.clientY + 10}px`;
                        }
                    });

                    document.addEventListener('click', (e) => 
                    {
                        tooltip.style.display = 'none';
                    });
                }   

                // Function to handle click event for GE15 visualization
                function handleClickRaceGE15(result) 
                {
                    const tooltip = document.getElementById('tooltip');

                    result.view.addEventListener('mouseover', (event, item) => 
                    {
                        if (item && item.datum && item.datum.PARLIAMENTARY_NAME) 
                        {
                            const data = item.datum;
                            const raceData = [
                                { race: 'Malay', percentage: data.Malay },
                                { race: 'Chinese', percentage: data.Chinese },
                                { race: 'Indian', percentage: data.Indian },
                                { race: 'Orang Asli', percentage: data['Orang Asli'] },
                                { race: 'Bumiputera Sabah', percentage: data['Bumiputera Sabah'] },
                                { race: 'Bumiputera Sarawak', percentage: data['Bumiputera Sarawak'] },
                                { race: 'Others', percentage: data.Others }
                            ];

                            const pieSpec = {
                                "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
                                "title": `${data.PARLIAMENTARY_NAME} Race Distribution`,
                                "width": 200,
                                "height": 200,
                                "data": { "values": raceData },
                                "transform": [
                                    {
                                        "calculate": "datum.percentage / 100",
                                        "as": "percentageDivided"
                                    }
                                ],
                                "mark": "arc",
                                "encoding": {
                                "theta": { "field": "percentage", "type": "quantitative" },
                                "color": {
                                    "field": "race",
                                    "type": "nominal",
                                    "scale": {
                                    "domain": ["Malay", "Chinese", "Indian", "Orang Asli", "Bumiputera Sabah", "Bumiputera Sarawak", "Others"],
                                    "range": ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd", "#8c564b", "#e377c2"]
                                    },
                                    "legend": 
                                    {
                                        "title":"Race"
                                    }
                                },
                                "tooltip": [
                                    { "field": "race", "type": "nominal", "title": "Race" },
                                    { "field": "percentageDivided", "type": "quantitative", "format": ".2%", "title": "Percentage" }
                                ]
                                }, "config": {}
                            };

                            vegaEmbed('#tooltip', pieSpec, { actions: false });
                            tooltip.style.display = 'block';
                            tooltip.style.left = `${event.clientX + 10}px`;
                            tooltip.style.top = `${event.clientY +700}px`;
                            }
                        });

                        // Hide tooltip when clicking outside
                        document.addEventListener('click', (e) => {
                                tooltip.style.display = 'none';
                        });
                }

                if (currentElection === 'GE15') 
                {
                    vegaEmbed('#vis', ge15Url, {"actions":false}).then(result => {
                        handleClickRaceGE15(result);
                    }).catch(console.error);
                } 
                else 
                {
                    vegaEmbed('#vis', ge14Url,{"actions":false}).then(result => {
                        handleClickRaceGE14(result);
                    }).catch(console.error);
                }

                const visTextLeft = document.getElementById('vis-text-left');
                visTextLeft.innerHTML = `<p>
                    By analyzing the race distribution of each seat, it became clear that <br> 
                    constituencies with a higher percentage of <span class ='malay-text'>Malay</span> voters in <b>rural areas</b> <br> 
                    were more likely to be won by <b>Perikatan Nasional (PN)</b> and <b>Barisan <br>
                    Nasional (BN)</b>. In contrast, seats with a similar percentage of <span class ='malay-text'>Malay</span> <br>
                    voters in <b>urban areas</b> were more likely to be won by <b>Pakatan Harapan <br>
                    (PH)</b>.
                    </p> 

                    <p>
                    This pattern reflects Malaysia’s political landscape, where rural <br>
                    regions tend to be more conservative, while urban areas are more <br>
                    open to change.
                    </p> `;
                const visTextRight = document.getElementById('vis-text-right');
                visTextRight.innerHTML = `<p>
                    Additionally, constituencies with a higher percentage of <span class='chinese-text'>Chinese</span> <br>
                    voters were more likely to be won by <b>Pakatan Harapan (PH)</b>, while <br>
                    those with a higher percentage of <span class='bumi-sarawak-text'>Bumiputera Sarawak</span> voters were <br>
                    won by <b>Barisan Nasional (BN)</b> in <span class='ge14-text'>GE14</span> and <b>Gabungan Parti <br>
                    Sarawak (GPS)</b> in <span class='ge15-text'>GE15</span>.
                    </p>

                    <p> 
                    Constituencies with a higher percentage of <span class='bumi-sabah-text'>Bumiputera Sabah</span> voters <br>
                    had consistently been won by <b>Barisan Nasional (BN)</b>.
                    </p>`;
                                }
            
            function toggleElection() 
            {
                currentElection = currentElection === 'GE15' ? 'GE14' : 'GE15';
                document.getElementById('toggleButton').innerText = currentElection === 'GE15' ? 'GE14' : 'GE15';
                if (currentVisualization === 'election') {
                    showElection();
                } else if (currentVisualization === 'turnout') {
                    showTurnout();
                } else if (currentVisualization === 'absent') {
                    showAbsent();
                } else if (currentVisualization === 'race') {
                    showRace();
                }
            }
            vegaEmbed('#radar', "json/radar_chart.json",{"actions":false}).then(function(result) {}).catch(console.error); 
            vegaEmbed('#absent', "json/proportional.json",{"actions":false}).then(function(result) {}).catch(console.error);
            vegaEmbed('#mosaic', "json/mosaic.json",{"actions":false}).then(function(result) {}).catch(console.error);
            vegaEmbed('#pop_pyramid', "json/population_pyramid.json",{"actions":false}).then(function(result) {}).catch(console.error); 
            vegaEmbed('#treemap', "json/treemap.json",{"actions":false}).then(function(result) {
                document.querySelector('select').classList.add('layout');
            }).catch(console.error);
        </script>
    </div>
</body>
</html>